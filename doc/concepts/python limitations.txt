Решение с расширением диапазона дополнительных значений nonce (ExtraNonce)
С 2012 года майнинг биткойнов начал развиваться в направлении устранения основного ограничения в структуре заголовка блока. В начальном периоде развития биткойн-системы майнер мог найти блок с помощью итеративного перебора значений nonce для получения хэш-значения, меньшего, чем установленное целевое значение. По мере роста уровня сложности майнерам часто приходилось перебирать все 4 миллиарда значений nonce без обнаружения желаемого блока. Но эта проблема была легко устранимой с помощью обновления метки времени блока с учетом фактически затраченного на вычисления времени. Так как метка времени является частью заголовка, ее изменение позволяло майнерам повторять итеративный проход по значениям nonce с другими результатами. Но после того как мощность аппаратного оборудования для майнинга превысила 4 Гхэш/сек, сложность этой методики стала возрастать, поскольку перебор всех возможных значений nonce стал занимать менее секунды. После внедрения в процесс майнинга АSIС-оборудования и соответствующего повышения вычислительной мощности до нескольких ТХэш/сек для программного обеспечения майнинга потребовалось увеличение области допустимых значений nonce, чтобы обеспечить возможность нахождения корректных блоков. Можно было бы увеличить поле метки времени на один бит, но перемещение ее в слишком далекое будущее привело бы к тому, что блок становился некорректным. Был необходим новый источник изменений в заголовке блока. Решением стало использование coinBase-транзакции как источника дополнительных значений nonce. Так как в coinBase-скрипте может сохраняться от 2 до 100 байтов данных, майнеры начали использовать этот «резерв» в качестве области дополнительных значений nonce, что позволило вести поиск в гораздо более широком диапазоне значений заголовка для поиска корректных блоков. CoinBase-транзакция включена в дерево Меркле, таким образом, любое изменение в coinBase-скрипте также изменяет корень дерева Меркле. Восемь байтов дополнительного значения nonce плюс 4 байта «стандартного» значения nonce позволяют майнерам исследовать в общей сумме 296 (8 с 28 нулями) возможных значений в секунду без каких-либо изменений метки времени. Если в будущем майнеры смогут превысить и этот предел возможностей, то можно будет изменять метку времени. Кроме того, в coinBase-скрипте остается место для будущего расширения области допустимых значений nonce.
Есть проблема с некоторыми майнерами, в которых код, использующий размещение данных ExtraNonce в coinBase конфликтует с данными о выплате майнерам в CoinBase TX.
